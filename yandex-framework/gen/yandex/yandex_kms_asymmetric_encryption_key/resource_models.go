// Code generated by tfgen. DO NOT EDIT.

package yandex_kms_asymmetric_encryption_key

import (
	"context"
	"time"

	"github.com/hashicorp/terraform-plugin-framework-timeouts/resource/timeouts"
	"github.com/hashicorp/terraform-plugin-framework/attr"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/hashicorp/terraform-plugin-framework/types/basetypes"
	asymmetricencryption "github.com/yandex-cloud/go-genproto/yandex/cloud/kms/v1/asymmetricencryption"
	"github.com/yandex-cloud/terraform-provider-yandex/pkg/converter"
)

type yandexKmsAsymmetricEncryptionKeyModel struct {
	AsymmetricEncryptionKeyId types.String   `tfsdk:"asymmetric_encryption_key_id"`
	ID                        types.String   `tfsdk:"id"`
	CreatedAt                 types.String   `tfsdk:"created_at"`
	DeletionProtection        types.Bool     `tfsdk:"deletion_protection"`
	Description               types.String   `tfsdk:"description"`
	EncryptionAlgorithm       types.String   `tfsdk:"encryption_algorithm"`
	FolderId                  types.String   `tfsdk:"folder_id"`
	Labels                    types.Map      `tfsdk:"labels"`
	Name                      types.String   `tfsdk:"name"`
	Status                    types.String   `tfsdk:"status"`
	Timeouts                  timeouts.Value `tfsdk:"timeouts"`
}

func (m *yandexKmsAsymmetricEncryptionKeyModel) GetAsymmetricEncryptionKeyId() types.String {
	return m.AsymmetricEncryptionKeyId
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetID() types.String {
	return m.ID
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetCreatedAt() types.String {
	return m.CreatedAt
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetDeletionProtection() types.Bool {
	return m.DeletionProtection
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetDescription() types.String {
	return m.Description
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetEncryptionAlgorithm() types.String {
	return m.EncryptionAlgorithm
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetFolderId() types.String {
	return m.FolderId
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetLabels() types.Map {
	return m.Labels
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetName() types.String {
	return m.Name
}
func (m *yandexKmsAsymmetricEncryptionKeyModel) GetStatus() types.String {
	return m.Status
}

func NewYandexKmsAsymmetricEncryptionKeyModel() yandexKmsAsymmetricEncryptionKeyModel {
	return yandexKmsAsymmetricEncryptionKeyModel{
		AsymmetricEncryptionKeyId: types.StringNull(),
		ID:                        types.StringNull(),
		CreatedAt:                 types.StringNull(),
		DeletionProtection:        types.BoolNull(),
		Description:               types.StringNull(),
		EncryptionAlgorithm:       types.StringNull(),
		FolderId:                  types.StringNull(),
		Labels:                    types.MapNull(types.StringType),
		Name:                      types.StringNull(),
		Status:                    types.StringNull(),
	}
}

func yandexKmsAsymmetricEncryptionKeyModelFillUnknown(target yandexKmsAsymmetricEncryptionKeyModel) yandexKmsAsymmetricEncryptionKeyModel {
	if target.AsymmetricEncryptionKeyId.IsUnknown() || target.AsymmetricEncryptionKeyId.IsNull() {
		target.AsymmetricEncryptionKeyId = types.StringNull()
	}
	if target.ID.IsUnknown() || target.ID.IsNull() {
		target.ID = types.StringNull()
	}
	if target.CreatedAt.IsUnknown() || target.CreatedAt.IsNull() {
		target.CreatedAt = types.StringNull()
	}
	if target.DeletionProtection.IsUnknown() || target.DeletionProtection.IsNull() {
		target.DeletionProtection = types.BoolNull()
	}
	if target.Description.IsUnknown() || target.Description.IsNull() {
		target.Description = types.StringNull()
	}
	if target.EncryptionAlgorithm.IsUnknown() || target.EncryptionAlgorithm.IsNull() {
		target.EncryptionAlgorithm = types.StringNull()
	}
	if target.FolderId.IsUnknown() || target.FolderId.IsNull() {
		target.FolderId = types.StringNull()
	}
	if target.Labels.IsUnknown() || target.Labels.IsNull() {
		target.Labels = types.MapNull(types.StringType)
	}
	if target.Name.IsUnknown() || target.Name.IsNull() {
		target.Name = types.StringNull()
	}
	if target.Status.IsUnknown() || target.Status.IsNull() {
		target.Status = types.StringNull()
	}
	return target
}

var yandexKmsAsymmetricEncryptionKeyModelType = types.ObjectType{
	AttrTypes: map[string]attr.Type{
		"asymmetric_encryption_key_id": types.StringType,
		"id":                           types.StringType,
		"created_at":                   types.StringType,
		"deletion_protection":          types.BoolType,
		"description":                  types.StringType,
		"encryption_algorithm":         types.StringType,
		"folder_id":                    types.StringType,
		"labels":                       types.MapType{ElemType: types.StringType},
		"name":                         types.StringType,
		"status":                       types.StringType,
		"timeouts":                     timeouts.BlockAll(context.Background()).Type(),
	},
}

func flattenYandexKmsAsymmetricEncryptionKey(ctx context.Context,
	yandexKmsAsymmetricEncryptionKey *asymmetricencryption.AsymmetricEncryptionKey,
	state yandexKmsAsymmetricEncryptionKeyModel,
	to timeouts.Value,
	diags *diag.Diagnostics) types.Object {
	if yandexKmsAsymmetricEncryptionKey == nil {
		return types.ObjectNull(yandexKmsAsymmetricEncryptionKeyModelType.AttrTypes)
	}
	value, diag := types.ObjectValueFrom(ctx, yandexKmsAsymmetricEncryptionKeyModelType.AttrTypes, yandexKmsAsymmetricEncryptionKeyModel{
		AsymmetricEncryptionKeyId: types.StringValue(yandexKmsAsymmetricEncryptionKey.GetId()),
		ID:                        types.StringValue(yandexKmsAsymmetricEncryptionKey.GetId()),
		CreatedAt:                 types.StringValue(yandexKmsAsymmetricEncryptionKey.GetCreatedAt().AsTime().Format(time.RFC3339)),
		DeletionProtection:        types.BoolValue(yandexKmsAsymmetricEncryptionKey.GetDeletionProtection()),
		Description:               types.StringValue(yandexKmsAsymmetricEncryptionKey.GetDescription()),
		EncryptionAlgorithm:       types.StringValue(yandexKmsAsymmetricEncryptionKey.GetEncryptionAlgorithm().String()),
		FolderId:                  types.StringValue(yandexKmsAsymmetricEncryptionKey.GetFolderId()),
		Labels:                    flattenYandexKmsAsymmetricEncryptionKeyLabels(ctx, yandexKmsAsymmetricEncryptionKey.GetLabels(), state.Labels, diags),
		Name:                      types.StringValue(yandexKmsAsymmetricEncryptionKey.GetName()),
		Status:                    types.StringValue(yandexKmsAsymmetricEncryptionKey.GetStatus().String()),
		Timeouts:                  to,
	})
	diags.Append(diag...)
	return value
}

func expandYandexKmsAsymmetricEncryptionKey(ctx context.Context, yandexKmsAsymmetricEncryptionKeyState types.Object, diags *diag.Diagnostics) *asymmetricencryption.AsymmetricEncryptionKey {
	if yandexKmsAsymmetricEncryptionKeyState.IsNull() || yandexKmsAsymmetricEncryptionKeyState.IsUnknown() {
		return nil
	}
	var yandexKmsAsymmetricEncryptionKey yandexKmsAsymmetricEncryptionKeyModel
	diags.Append(yandexKmsAsymmetricEncryptionKeyState.As(ctx, &yandexKmsAsymmetricEncryptionKey, basetypes.ObjectAsOptions{UnhandledNullAsEmpty: true, UnhandledUnknownAsEmpty: true})...)
	if diags.HasError() {
		return nil
	}
	return expandYandexKmsAsymmetricEncryptionKeyModel(ctx, yandexKmsAsymmetricEncryptionKey, diags)
}

func expandYandexKmsAsymmetricEncryptionKeyModel(ctx context.Context, yandexKmsAsymmetricEncryptionKeyState yandexKmsAsymmetricEncryptionKeyModel, diags *diag.Diagnostics) *asymmetricencryption.AsymmetricEncryptionKey {
	value := &asymmetricencryption.AsymmetricEncryptionKey{}
	value.SetId(yandexKmsAsymmetricEncryptionKeyState.AsymmetricEncryptionKeyId.ValueString())
	value.SetId(yandexKmsAsymmetricEncryptionKeyState.AsymmetricEncryptionKeyId.ValueString())
	value.SetCreatedAt(converter.ParseTimestamp(yandexKmsAsymmetricEncryptionKeyState.CreatedAt.ValueString(), diags))
	value.SetDeletionProtection(yandexKmsAsymmetricEncryptionKeyState.DeletionProtection.ValueBool())
	value.SetDescription(yandexKmsAsymmetricEncryptionKeyState.Description.ValueString())
	value.SetEncryptionAlgorithm(asymmetricencryption.AsymmetricEncryptionAlgorithm(asymmetricencryption.AsymmetricEncryptionAlgorithm_value[yandexKmsAsymmetricEncryptionKeyState.EncryptionAlgorithm.ValueString()]))
	value.SetFolderId(yandexKmsAsymmetricEncryptionKeyState.FolderId.ValueString())
	value.SetLabels(expandYandexKmsAsymmetricEncryptionKeyLabels(ctx, yandexKmsAsymmetricEncryptionKeyState.Labels, diags))
	value.SetName(yandexKmsAsymmetricEncryptionKeyState.Name.ValueString())
	value.SetStatus(asymmetricencryption.AsymmetricEncryptionKey_Status(asymmetricencryption.AsymmetricEncryptionKey_Status_value[yandexKmsAsymmetricEncryptionKeyState.Status.ValueString()]))
	if diags.HasError() {
		return nil
	}
	return value
}

func flattenYandexKmsAsymmetricEncryptionKeyLabels(ctx context.Context, yandexKmsAsymmetricEncryptionKeyLabels map[string]string, listState types.Map, diags *diag.Diagnostics) types.Map {
	if yandexKmsAsymmetricEncryptionKeyLabels == nil {
		if !listState.IsNull() && !listState.IsUnknown() && len(listState.Elements()) == 0 {
			return listState
		}
		return types.MapNull(types.StringType)
	}
	yandexKmsAsymmetricEncryptionKeyLabelsValues := make(map[string]attr.Value)
	for k, elem := range yandexKmsAsymmetricEncryptionKeyLabels {
		val := types.StringValue(elem)
		yandexKmsAsymmetricEncryptionKeyLabelsValues[k] = val
	}

	value, diag := types.MapValue(types.StringType, yandexKmsAsymmetricEncryptionKeyLabelsValues)
	diags.Append(diag...)
	return value
}

func expandYandexKmsAsymmetricEncryptionKeyLabels(ctx context.Context, yandexKmsAsymmetricEncryptionKeyLabelsState types.Map, diags *diag.Diagnostics) map[string]string {
	if yandexKmsAsymmetricEncryptionKeyLabelsState.IsNull() || yandexKmsAsymmetricEncryptionKeyLabelsState.IsUnknown() {
		return nil
	}
	if len(yandexKmsAsymmetricEncryptionKeyLabelsState.Elements()) == 0 {
		return map[string]string{}
	}
	yandexKmsAsymmetricEncryptionKeyLabelsRes := make(map[string]string)
	yandexKmsAsymmetricEncryptionKeyLabelsType := make(map[string]types.String)
	diags.Append(yandexKmsAsymmetricEncryptionKeyLabelsState.ElementsAs(ctx, &yandexKmsAsymmetricEncryptionKeyLabelsType, false)...)
	if diags.HasError() {
		return nil
	}
	for k, elem := range yandexKmsAsymmetricEncryptionKeyLabelsType {
		yandexKmsAsymmetricEncryptionKeyLabelsRes[k] = elem.ValueString()
	}
	return yandexKmsAsymmetricEncryptionKeyLabelsRes
}
